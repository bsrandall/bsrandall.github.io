<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; No Excuses CCIE
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/">
          <img src="http://www.gravatar.com/avatar/?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p>A dedicated network professional, working hard every day for my wife and child.</p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/blog/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/layer2/">
          Wiki
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="">
                
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="">
                
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="http://bsrandall.github.io/">
          Github Project
        </a>

        
      </span>

    

    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="No Excuses CCIE">
              <img class="masthead-logo" src="/public/logo.png"/>
            </a>
            <small>My professional journey towards CCIE Route & Switch</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/rip/2017/04/19/RIPv2-Authentication/">
        RIPv2 Authentication
      </a>
    </h1>

    <span class="post-date">19 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>RFC 1723 for RIPv2 provided for only plain text passwords. This was achieved by reducing the available number of routes in a RIP message from 25 to 24 and including the plain text password in the first route entry. However, there is an Authentication Type field in the RIPv2 message format, and Cisco takes advantage of this to provide better security.</p>

<p>Cisco decided to offer MD5 authentication by using the first and <em>last</em> route entries of a RIP message for MD5 authentication. The Authentication Type for this is 3.</p>

<p>The implementation of RIPv2 authentication requires the use of a key chain. The key chain and mode are then specified under interface configuration mode.
R1 Configuration:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>`key chain Tewa
 key 1
 key-string Kachina
interface Ethernet 0
 ip rip authentication key-chain Tewa
 ip rip authentication mode md5
</code></pre>
</div>
<p>`R2 Configuration:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>`key chain Keres
 key 1
 key-string Kachina
interface Ethernet 0
 ip rip authentication key-chain Keres
 ip rip authentication mode md5
</code></pre>
</div>
<p>`
Notice that the key chain names are only locally significant - only the key-strings have to match.</p>

    <article>
    <div class="post-more">
      
      <a href="/rip/2017/04/19/RIPv2-Authentication/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/rip/2017/04/19/RIPv2-Authentication/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/rip/2017/04/19/RIP-Configuration/">
        RIP Configuration
      </a>
    </h1>

    <span class="post-date">19 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#configuration" class="post-tag">configuration</a>
    
    

    <article>
      <p>Only two steps are needed to configure RIP.</p>
<ol>
  <li>Enable RIP with the global configuration command <code class="highlighter-rouge">router rip</code></li>
  <li>Specify each major network on which to run RIP with the <strong>network</strong> command.</li>
</ol>

<p>The classful nature of RIP means that we can only specify major class A, B, or C networks with the network command.</p>

<p>If needed, <strong>debug ip rip</strong> with show RIP messages and activity.</p>

<p>To block RIP broadcasts on an interface connected to a subnet of a RIP-enabled network, add the <code class="highlighter-rouge">passive-interface gig0/1</code> command to the RIP process. The <strong>passive-interface</strong> command is not specific to RIP as it can be used with all routing protocols for this purpose.  This will only get the router to quit <strong>sending</strong> updates. If you want the router to not learn routes advertised across the interface, you must filter those updates.</p>

<p>Another configuration option is the <strong>neighbor</strong>  command. If you specify a neighbor, routing exchanges will be done via unicast packets as compared to the normal RIP multicast method. Often, this is used in combination with the <strong>passive-interface</strong> command on Ethernet interfaces. The passive-interface disables the multicast advertisements but you can then enable advertisement exchange with a single host on the broadcast network via the <strong>neighbor</strong> command.</p>

<p>Another configuration issue is that RIPv1 does not support discontiguous networks. Discontiguous networks arise when a major network is separated by a major network. The problem arises because RIP summarizes at the major network boundary. This summarization is done at the classful boundary. If there is one major network between the two discontiguous networks, the RIP routers will receive a summarized route they already have in their routing table, so they will silently drop it. The result is that only half the of the discontiguous network is reachable. If there are two major networks between, then each major network believes it has a route to the summarized network, so they will install two equal-cost routes to the discontiguous network. This again would result in only half the communication being received by the destination network.</p>

<p>The workarounds for discontiguous networks with RIP would be to install static routes for the individual networks. The other solution is to apply secondary IPs to the interfaces of the in-between major network. These IPs would be from the summarized discontiguous network in question. The RIP routing process sees secondary addresses as separate data links.</p>

<p>Sometimes with RIP configuration, it may become necessary to manipulate the metric (hop count). This is done with the combination of an <strong>offset-list</strong> and an access-list. The offset-list adds the number specified to the metric of the route entry matching an access-list. The access-list matches the route for which to apply the offset-list. You use the keywords <strong>in</strong> and <strong>out</strong> with the offset-list to determine if the offset-list should change the metric on inbound Response Messages it receives or outbound Response Messages it sends. Here is an example configuration.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>`access-list 1 permit 10.33.0.0 0.0.0.0
router rip
  network 192.168.12.0
  network 10.0.0.0
  offset-list 1 in 2 Serial0
</code></pre>
</div>
<p><code class="highlighter-rouge">This one says examine RIP advertisements coming in interface Serial 0. If they are for the 10.33.0.0 network (from access-list 1), then add 2 hops to the metric.
</code>``
`
Another configuration option is triggered updates. RIP will normally broadcast its entire routing table every 30 seconds by default. If no routes are changing, this can be very inefficient on slow links. On an interface, by interface basis, you can issue the command <strong>ip rip triggered</strong> which will force the routers on that interface to only exchange routes and updates when changes in the topology occur.</p>

    <article>
    <div class="post-more">
      
      <a href="/rip/2017/04/19/RIP-Configuration/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/rip/2017/04/19/RIP-Configuration/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/rip/2017/04/19/RIP-Classful-Routing/">
        RIP Classful Routing
      </a>
    </h1>

    <span class="post-date">19 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>RIPv1 is a classful routing protocol. This is not quite as black and white as it seems. First, some housekeeping. When we see a route like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>`R    10.10.0.0 [120/3]() via 10.5.5.1, 00:00:20, Serial1
</code></pre>
</div>
<p>`
The 120/3 is the administrative distance followed by the metric. With RIP, the metric is hop count, so 3 in this route indicates the network is 3 hops away via the Serial1 interface.</p>

<p>If more than one route exists for a destination, and both routes have the same hop count, then equal-cost load balancing will be performed.</p>

<p>RIP performs the route lookup by first performing a classful route table lookup.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>`Gateway of last resort is not set
10.0.0.0 255.255.0.0 is subnetted, 9 subnets
R    10.10.0.0 [120/3]() via 10.5.5.1, 00:00:20, Serial1
   [120/3]() via 10.1.1.1, 00:00:21, Ethernet0
R    10.11.0.0 [120/3]() via 10.5.5.1, 00:00:21, Serial1
   [120/3]() via 10.1.1.1, 00:00:21, Ethernet0
</code></pre>
</div>
<p>`
So if a packet destined for 10.12.10.2 came into the router, it would first look for 10.0.0.0. If there were no match, the packet is dropped and an ICMP Destination Unreachable message is sent to the packet’s source. If there is a match for the network portion (as there is in this example), then the subnets are examined. If there is a subnet match, the packet is routed. If there is not subnet match, the packet is dropped and a Destination Unreachable message is sent (as would happen with 10.12.10.2).</p>

<p>If you look at the routing table and examine RIP entries, you will notice there is no provision for RIP to advertise a subnet mask along with each route entry. The router’s only recourse is to assume that the mask configured on one of its interfaces for that address is used consistently throughout the rest of the network.  If the network is not directly connected, there is a listing only for the major-class network and no associated mask.</p>

<p>Note that since the destination address of packets being routed by a classful routing protocol are interpreted according to the subnet masks locally configured on the router’s interfaces, all subnet masks within a major, class-level network must be consistent.</p>

<p>In the case above where there is no directly connected network, RIP summarizes at the classful network boundaries. This is called <em>subnet hiding</em>. So a router would only send advertisements for 10.0.0.0, 172.16.0.0, and 192.169.17.0 for example.</p>

<p>A good way to summarize is the following:</p>
<ol>
  <li>If the destination address is a member of a directly connected major network, the subnet mask configured on the interface attached to that network will be used to determine the subnet of the destination.</li>
  <li>If the destination address is not a member of a directly connected major network, the router will try to match only the major class A, B, or C portion of the destination address.</li>
</ol>


    <article>
    <div class="post-more">
      
      <a href="/rip/2017/04/19/RIP-Classful-Routing/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/rip/2017/04/19/RIP-Classful-Routing/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/rip/2017/04/19/RIP-Messages/">
        RIP Messages
      </a>
    </h1>

    <span class="post-date">19 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p><img src="/assets/ripformat.png" alt="RIP Message" />
Each RIP Message that contains a single command and a version number can contain up to 25 routes. The command is either 1 for a Request Message or 2 for a Response Message. The Version will be 1 for RIPv1.</p>

<p>The <em>Address Family Identifier</em> is set to 2 for IP - the only exception to this is if this is a request for the router’s full route table. In this case, the address family identifier will be 0.</p>

<p><em>IP Address</em> is the address of the destination of the route.</p>

<p><em>Metric</em> is the hop count, a value between 1 and 16, with 16 meaning unreachable.</p>

<p>Request Messages can either request a full routing table or information on a specific route. If the Request message is asking for the full routing table, it will have  the address family identifier set to zero, the address set to 0.0.0.0, and the metric set to 16. A router responds to such a request by sending its full routing table, honoring rules such as split horizon and boundary summarization.</p>

<p>If the Request message is for a specific route or routes, the router responds differently. If it does not have a route to the route in question, the router responds to the Request message with a metric of 16, otherwise, it responds to the Request listing its own metric. Interestingly, when responding to specific routes the router does not suppress routes due to split horizon or boundary summarization.</p>


    <article>
    <div class="post-more">
      
      <a href="/rip/2017/04/19/RIP-Messages/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/rip/2017/04/19/RIP-Messages/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/rip/2017/04/19/RIP-Timers/">
        RIP Timers
      </a>
    </h1>

    <span class="post-date">19 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>There are several timers related to RIP. The <strong>update timer</strong> on Cisco routers varies between 25.5 and 30 seconds (to prevent synchronization). This is the interval a router waits before sending new periodic Response messages.</p>

<p>Cisco calls the expiration timer (or timeout) the <strong>invalid timer</strong>. This is the amount of time a route can stay in the route table without being updated. The default Cisco invalid timer for RIP is 180 seconds (6 Update periods). If an updated route is not heard within the invalid timer, the hop count for the route is changed to 16, the equivalent of making the route unreachable. In IOS, the route in the routing table will say “possibly down” when viewed via <code class="highlighter-rouge">show ip route</code>.</p>

<p>The <strong>garbage timer</strong> (or flush timer) is the amount of time the route that was made unreachable by the invalid timer will continue to be advertised.. Once the garbage timer expires, the route will be completely removed from the routing table. With Cisco IOS it is set to 240 seconds by default, 60 seconds longer than the invalid timer.</p>

<p>RFC 1058 for RIP does not call for the use of <strong>holddown timers</strong>, but Cisco’s implementation implements it. We saw this earlier - the timer starts when a route is received that is already in the route table, but the new route has a higher hop count than the stored route. It is 180 seconds by default.</p>

<p>The four timers can be manipulated with the command:
<strong>timers basic</strong> <em>update invalid holddown flush</em></p>

    <article>
    <div class="post-more">
      
      <a href="/rip/2017/04/19/RIP-Timers/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/rip/2017/04/19/RIP-Timers/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page3">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/">Newer</a>
    
  
</div>


      </div>
    </div>
      
    





      
      

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-00000000-1', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//your_short_name.disqus.com/count.js" async></script>
  
</html>
