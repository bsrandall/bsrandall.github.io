<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; No Excuses CCIE
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/">
          <img src="http://www.gravatar.com/avatar/?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p>A dedicated network professional, working hard every day for my wife and child.</p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/blog/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="http://bsrandall.github.io/">
          Github Project
        </a>

        
      </span>

    

    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="No Excuses CCIE">
              <img class="masthead-logo" src="/public/logo.png"/>
            </a>
            <small>My professional journey towards CCIE Route & Switch</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/general%20routing/2017/04/05/Floating-Static-Routes/">
        Floating Static Routes
      </a>
    </h1>

    <span class="post-date">05 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>A Floating Static route is a static route whose administrative distance has been increased in order to make the route function as a backup route. The global command would look like this:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>ip route 192.168.23.0 255.255.255.0 192.168.13.3 121
</code></pre>
</div>
<p>This would set the administrative distance to this route as 121, which would make it’s AD higher than a RIP, OSPF, or EIGRP learned route.</p>

    <article>
    <div class="post-more">
      
      <a href="/general%20routing/2017/04/05/Floating-Static-Routes/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/general%20routing/2017/04/05/Floating-Static-Routes/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/general%20routing/2017/04/05/CEF/">
        CEF
      </a>
    </h1>

    <span class="post-date">05 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>Routing is the process by which the router finds the interface to send outgoing packets out of. Switching is the actual process of physically transferring this packets from the ingress interface to the degree interface,</p>

<p>Process Switching is the oldest of the switching methods available in Cisco devices. When a packet arrives, the switching process relies on the CPU to do start at the top of the RIB and for each route do a binary AND against the destination to determine the longest match. It has to do this for every packet as it arrives. The time it may take for a lookup is dependent on where the route sits in the forwarding table, so your worst case scenario is the router would have to do 100,000 lookups.</p>

<p>Fast Switching is an improvement on Process Switching where a lookup only has to be done on the first inbound packet. The rest of the “flow” knows the switching path and utilizes what was learned from the lookup on the first packet.</p>

<p>Cisco Express Forwarding is the modern switching process found in Cisco devices. Once the router builds the RIB, the router pre calculates the routes and then stores these calculations in working memory, or in the case of devices that perform hardware acceleration, in port based ASICs.</p>

<p>To see the CEF calculated for a given route, use <code class="highlighter-rouge">show ip cef 192.168.1.10</code>, for example.</p>

<p>One thing to remember is that the switching process is responsible for load balancing. This is done on a flow basis, not on a per packet basis as that would be too inefficient and packets would almost always arrive out of order on the other end.</p>

<p><code class="highlighter-rouge">show ip interface</code> will tell you if CEF has been enabled. A key indicator of a router that does not have CEF enabled is one that has high CPU usage. It is also important to remember that packets that are logged do not get CEF switched, so any logging requires a lot of available CPU.</p>

    <article>
    <div class="post-more">
      
      <a href="/general%20routing/2017/04/05/CEF/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/general%20routing/2017/04/05/CEF/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/general%20routing/2017/04/04/Egress-Interface-vs-Next-Hop/">
        Egress Interface vs Next Hop Static Routing
      </a>
    </h1>

    <span class="post-date">04 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>There are some difference on router behavior depending on if you use a Next Hop IP address or an Egress Interface as the destination in your static route. This article will describe some of this e differences.</p>

<p>If you use the Next Hop IP address, the router will have to find the interface leading towards the destination address before the route will be installed in the forwarding table. When the router finds the egress interface it will then check to see if the interface is point-to-point or multipoint. If it is multipoint, then the router will need the MAC address of the Next Hop address. If it doesn’t have it, then it will need to use ARP.</p>

<p>If you use the outgoing interface the router does not have to do the recursive lookup to find the correct outgoing interface. But the problem is the router doesn’t know which layer 2 neighbor routers exist on that link. So the only choice the router has is to ARP for the final destination address (rather than next hop as above). Where this can get outrageous is that the router will need to have MAC addresses resolved for <em>all hosts</em> in the subnet and you will need proxy ARP enabled on all routers in the segment. The example gets even more outrageous if you define a default route that points to a multipoint interface. So it should be clear this should only be used on point-to-point interfaces.</p>

<p>Point-to-point interfaces do not have the same problem as the router knows there is only one host to receive the traffic on the other end. In other words, recursion will not be required nor will Layer 2 resolution be required.</p>

    <article>
    <div class="post-more">
      
      <a href="/general%20routing/2017/04/04/Egress-Interface-vs-Next-Hop/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/general%20routing/2017/04/04/Egress-Interface-vs-Next-Hop/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/general%20routing/2017/04/04/Default-Routing/">
        Default Routing
      </a>
    </h1>

    <span class="post-date">04 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>Because of route recursion and the need for Layer 2 lookups on multipoint interfaces, default routing should be set up in one of two ways:</p>
<ul>
  <li>to a next hop IP address if the interface is multipoint or point-to-point</li>
  <li>to an interface ONLY if the interface is point-to-point.</li>
</ul>

<p>One issue with default routes is that you lose a lot of the routing detail. One way this shows itself is the fact that sites with default routes will have no idea if the end destination network is available. Another issue with the loss of detail has to do with having multiple default routes. With only having default routes, there is no routing details to show which is the better path to reach the end destination.</p>

    <article>
    <div class="post-more">
      
      <a href="/general%20routing/2017/04/04/Default-Routing/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/general%20routing/2017/04/04/Default-Routing/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/general%20routing/2017/04/03/Route-Recursion/">
        Route Recursion
      </a>
    </h1>

    <span class="post-date">03 Apr 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>Every time a router has to do a router lookup, a recursive lookup will be performed, unless the destination is directly connected. When a route lists an IP address as the next hop, unless that next hop is directly connected the router must find the path to that route. It may have to work through multiple recursions in order to eventually find the correct interface to route out of.</p>

<p>When a particular interface goes down, all routes depending on that interface are removed from the RIB. One important thing to remember here is that the route is only removed if the next hop IP address is not reachable - if there is a secondary path via another interface, then that route will remain valid. However, if you use the interface as the destination for the static route, then the route will fail.</p>

    <article>
    <div class="post-more">
      
      <a href="/general%20routing/2017/04/03/Route-Recursion/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/general%20routing/2017/04/03/Route-Recursion/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page8">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/page6">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-00000000-1', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//your_short_name.disqus.com/count.js" async></script>
  
</html>
