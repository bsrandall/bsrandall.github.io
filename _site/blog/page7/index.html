<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; No Excuses CCIE
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/">
          <img src="http://www.gravatar.com/avatar/?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p>A dedicated network professional, working hard every day for my wife and child.</p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/blog/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="http://bsrandall.github.io/">
          Github Project
        </a>

        
      </span>

    

    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="No Excuses CCIE">
              <img class="masthead-logo" src="/public/logo.png"/>
            </a>
            <small>My professional journey towards CCIE Route & Switch</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vtp/2017/02/21/VTP-Header/">
        VTP Messages
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>All VTP packets contain these fields in the header:</p>
<ul>
  <li>VTP version (1, 2, or 3)</li>
  <li>VTP Message Type
    <ul>
      <li>Summary advertisements</li>
      <li>Subset advertisement</li>
      <li>Advertisement requests</li>
      <li>VTP Join Messages</li>
    </ul>
  </li>
  <li>Management domain length</li>
  <li>Management domain name</li>
</ul>

<p>Most VTP packets contain the <em>configuration revision number</em> of the sender. This is used to determine if the received information is more recent than the current version.</p>

<p>By default, <em>summary advertisements</em> are sent every 5 minutes. The summary advertisement contains the VTP domain name and the current configuration revision number. If the VTP domain matches the switchâ€™s configured VTP domain, and the configuration revision number is higher than its own revision, the switch will send an <em>advertisement request</em>. Otherwise, it ignores the packet.</p>

<h4 id="summary-advertisement-packet-format">Summary Advertisement Packet Format</h4>
<p><img src="http://www.cisco.com/c/dam/en/us/support/docs/lan-switching/vtp/10558-21c.gif" alt="" /></p>

<p>A <em>subset advertisement</em> will follow a summary advertisement - it is the message that actually contains a list (or a subset of a list) of the VLANs being advertised.</p>

<p>A switch will send an <em>advertisement request</em> in these situations:</p>
<ul>
  <li>the switch has been reset</li>
  <li>the VTP domain name has been changed on the switch</li>
  <li>the switch has received a VTP summary advertisement with a higher configuration than its own</li>
</ul>


    <article>
    <div class="post-more">
      
      <a href="/vtp/2017/02/21/VTP-Header/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vtp/2017/02/21/VTP-Header/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vlan/2017/02/21/Dot1q/">
        Dot1q
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <h4 id="trunks">Trunks</h4>
<p>Dot1q is the standard trunking protocol used for transporting multiple VLANs across a trunk port. A trunk is a point-to-point link that carries the traffic for multiple VLANs across a single trunk. Dot1q is a standard that tags VLANs for identification. The receiving switch will then strip the VLAN tag from the frame before passing it to the appropriate access port.</p>

<p>The full name for Dot1q is IEEE 802.1Q.</p>

<p>The 802.1Q Tagged frame looks like this:
<img src="http://bsrandall.github.io/public/img/802.1q.png" alt="" /></p>

<ul>
  <li>The PRI field is the 3-bit 802.1p priority field.</li>
  <li>The CFI field is always set to 0 for Ethernet switches</li>
  <li>VLAN ID is a 12-bit field</li>
</ul>

<p>Because of the extra fields, an 802.1Q frame has an MTU of 1522 bytes.</p>

<p>If a non-802.1Q enabled device or an access port receives a tagged frame, it simply ignores the frame and forwards it as usual.</p>

<h4 id="native-vlan">Native VLAN</h4>
<p>A Native VLAN on a trunk is the VLAN to which untagged traffic belongs. Across a trunk, the Native VLANs should match on each end.</p>

<p><code class="highlighter-rouge">SW1# show interface trunk</code></p>

<p>will show the Native VLAN for each interface that has active trunking.</p>


    <article>
    <div class="post-more">
      
      <a href="/vlan/2017/02/21/Dot1q/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vlan/2017/02/21/Dot1q/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vlan/2017/02/21/DTP/">
        Dynamic Trunking Protocol (DTP)
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>Dynamic Trunking Protocol is a Cisco proprietary protocol that, when configured, attempts to negotiate trunking between two connected ports. It will try to negotiate trunking as well as the encapsulation type.</p>

<p><code class="highlighter-rouge">SW1# switchport mode dynamic auto</code></p>

<ul>
  <li>allows the interfaces to become a trunk if the neighboring trunk is set to trunk or desirable mode</li>
  <li>this is the default setting for newer Cisco switches</li>
  <li>if both ends of a trunk are set to dynamic auto, they will not form a trunk</li>
</ul>

<p><code class="highlighter-rouge">SW1# switchport mode dynamic desireable</code></p>
<ul>
  <li>makes the interface actively attempt to negotiate trunking</li>
  <li>the link will become a trunk if the neighbor interface is set to trunk, auto, or desirable</li>
</ul>

<p><code class="highlighter-rouge">SW1# switchport nonegotiate</code></p>
<ul>
  <li>prevents the interface from sending DTP frames</li>
  <li>can use this when the interface switch port mode is <em>access</em> or <em>trunk</em> only</li>
  <li>if enabled, to establish a trunk the neighbor interface must be manually set to <em>trunk</em></li>
</ul>


    <article>
    <div class="post-more">
      
      <a href="/vlan/2017/02/21/DTP/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vlan/2017/02/21/DTP/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vlan/2017/02/21/Allowed-VLANs/">
        VLANs
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>By default, all VLANs are allowed to traverse an 802.1Q trunk once it is active. To restrict which VLANs are allowed to cross a trunk, you must go into IOS and explicitly define the VLANs that are allowed.</p>

<p><code class="highlighter-rouge">SW1# switchport trunk allow VLAN 15-20,22,25</code></p>

<p><code class="highlighter-rouge">SW1# switchport trunk allowed vlan add 27</code></p>

<p><code class="highlighter-rouge">SW1# switchport trunk allowed vlan remove 18</code></p>

<p>You must remember that if an allowed VLAN list is already configured on a trunk, issuing the <code class="highlighter-rouge">SW1# switchport trunk allowed vlan 16-20,2,25</code> command will overwrite the previously defined VLANs. You must use the <em>add</em> and <em>remove</em> commands if there is already an allowed clan configuration in the running config.</p>

    <article>
    <div class="post-more">
      
      <a href="/vlan/2017/02/21/Allowed-VLANs/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vlan/2017/02/21/Allowed-VLANs/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vlan/2017/02/21/Access-Ports/">
        Access Ports
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>Access ports are those ports that are connected to end devices, not other switches. We define an access port on the command line with 
SW1# switchport mode access</p>

<p>We will see later with Spanning Tree, that PortFast can and should be used on access ports. This does two things. First, it allows the port to skip the listening phase for faster availability. Second, it prevents the access port from sending TCNs (Topology Change Notifications) every time a user plugs or unplugs a device into the port.</p>

<p>Another Spanning Tree feature which will relate to Access ports is BPDU Guard. With BPDU Guard, if the switch receives a BPDU on a port where BPDU Guard was enabled, the port will transition to the errdisabled state.</p>

    <article>
    <div class="post-more">
      
      <a href="/vlan/2017/02/21/Access-Ports/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vlan/2017/02/21/Access-Ports/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page8">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/page6">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-00000000-1', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//your_short_name.disqus.com/count.js" async></script>
  
</html>
