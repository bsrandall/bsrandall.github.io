<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; No Excuses CCIE
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/">
          <img src="http://www.gravatar.com/avatar/?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p>A dedicated network professional, working hard every day for my wife and child.</p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/blog/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/layer2/">
          Wiki
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="">
                
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="">
                
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="http://bsrandall.github.io/">
          Github Project
        </a>

        
      </span>

    

    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="No Excuses CCIE">
              <img class="masthead-logo" src="/public/logo.png"/>
            </a>
            <small>My professional journey towards CCIE Route & Switch</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/mst/2017/02/22/MST/">
        Multiple Spanning Tree
      </a>
    </h1>

    <span class="post-date">22 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>Multiple Spanning Tree (MST) was developed to overcome the high resource requirements of PVST. In reality, there are only a few logical redundant design on a network, regardless of the number of VLANs or the number of physical links. With MST you can run several different logical topologies (instances), and map VLANs to those instances. You get the benefit of running a redundant, fully utilized network without the resource overhead on the switches.</p>

<p>So the end result is that with PVST, a port is either forwarding or discarding for a VLAN, while with MST, a port is either forwarding or discarding for an instance which contains multiple VLANs.</p>

<p>MST is defined by IEEE 802.1s. A special instance, instance 0 or the Internal Spanning Tree (IST), is designated to carry all STP information. The BPDUs for IST carry all the standard RSTP information, as well as the configuration name, revision number, and a <em>hash value</em> calculated over the VLAN to instance mapping.</p>

<p>You should not run MSTP on access ports.</p>

    <article>
    <div class="post-more">
      
      <a href="/mst/2017/02/22/MST/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/mst/2017/02/22/MST/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vtp/2017/02/22/VTP-Pruning/">
        VTP Pruning
      </a>
    </h1>

    <span class="post-date">22 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>The principal of VTP pruning is if a client sends a broadcast to its connected switchâ€™s access port, that switch will flood the broadcast to all other connected switches in the VTP / Layer 2 domain. Because of VTP, all the other switches would be aware of the client VLAN, and would thus be required to flood the broadcast to all other switches.</p>

<p>But what if the other switches do not have any clients connected to access ports in that VLAN? They are still having to process the request, and the network segment still has to bear the broadcast traffic.</p>

<p>When you enable VTP pruning, you are enabling it for the entire VTP domain.</p>

<p>VTP pruning is enabled on the VTP server(s) with the simple global configuration command <code class="highlighter-rouge">vtp pruning</code>. To verify what VLANs have been pruned, you should use <code class="highlighter-rouge">show interface trunk</code>. Note that the VLANs will still be seen in the output of <code class="highlighter-rouge">show vlan</code>, but you will see they are pruned in the command as shown below.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>`SW4#sh int trunk

Port        Mode             Encapsulation  Status        Native vlan
Gi0/3       auto             802.1q         trunking      1
Gi1/0       auto             802.1q         trunking      1

Port        Vlans allowed on trunk
Gi0/3       1-4094
Gi1/0       1-4094

Port        Vlans allowed and active in management domain
Gi0/3       1,5,7-10,22,43,58,67,79,146
Gi1/0       1,5,7-10,22,43,58,67,79,146

Port        Vlans in spanning tree forwarding state and not pruned
Gi0/3       none
Gi1/0       none
</code></pre>
</div>
<p>`</p>

    <article>
    <div class="post-more">
      
      <a href="/vtp/2017/02/22/VTP-Pruning/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vtp/2017/02/22/VTP-Pruning/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vtp/2017/02/21/VTP-Versions/">
        VTP Versions
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>VTP is a Cisco proprietary protocol that allows VLAN administration to be shared across switches. It gives an administrator the capability to centrally administer VLAN creation across one or two switches, and have those VLANs propagate across a VTP domain made up of any number of switches.</p>

<p>There are 3 versions of VTP, versions 1, 2, and 3.  There are not many significant changes between versions 1 and 2, except version 2 introduced support for Token Ring VLANs.</p>

<p>Version 3 introduced the following enhancements:</p>
<ul>
  <li>hidden authentication (does not appear in plain text in the configuration file)</li>
  <li>Extended VLAN support. Versions 1 and 2 only support VLANs 1 - 1000 only.</li>
  <li>Support for private VLANs</li>
  <li>Support for MST</li>
  <li>primary and secondary servers</li>
</ul>

<p>With version 3, there are two types of VTP servers - primary and secondary. There is only one primary server, and the rest of the secondary servers act as backups to the primary. To declare a server as primary, use the following:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>SW1# vtp primary vlan
</code></pre>
</div>
<p>Notice the command is done in privileged mode, not configure mode!</p>

    <article>
    <div class="post-more">
      
      <a href="/vtp/2017/02/21/VTP-Versions/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vtp/2017/02/21/VTP-Versions/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vtp/2017/02/21/VTP-Header/">
        VTP Messages
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>All VTP packets contain these fields in the header:</p>
<ul>
  <li>VTP version (1, 2, or 3)</li>
  <li>VTP Message Type
    <ul>
      <li>Summary advertisements</li>
      <li>Subset advertisement</li>
      <li>Advertisement requests</li>
      <li>VTP Join Messages</li>
    </ul>
  </li>
  <li>Management domain length</li>
  <li>Management domain name</li>
</ul>

<p>Most VTP packets contain the <em>configuration revision number</em> of the sender. This is used to determine if the received information is more recent than the current version.</p>

<p>By default, <em>summary advertisements</em> are sent every 5 minutes. The summary advertisement contains the VTP domain name and the current configuration revision number. If the VTP domain matches the switchâ€™s configured VTP domain, and the configuration revision number is higher than its own revision, the switch will send an <em>advertisement request</em>. Otherwise, it ignores the packet.</p>

<h4 id="summary-advertisement-packet-format">Summary Advertisement Packet Format</h4>
<p><img src="http://www.cisco.com/c/dam/en/us/support/docs/lan-switching/vtp/10558-21c.gif" alt="" /></p>

<p>A <em>subset advertisement</em> will follow a summary advertisement - it is the message that actually contains a list (or a subset of a list) of the VLANs being advertised.</p>

<p>A switch will send an <em>advertisement request</em> in these situations:</p>
<ul>
  <li>the switch has been reset</li>
  <li>the VTP domain name has been changed on the switch</li>
  <li>the switch has received a VTP summary advertisement with a higher configuration than its own</li>
</ul>


    <article>
    <div class="post-more">
      
      <a href="/vtp/2017/02/21/VTP-Header/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vtp/2017/02/21/VTP-Header/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vlan/2017/02/21/DTP/">
        Dynamic Trunking Protocol (DTP)
      </a>
    </h1>

    <span class="post-date">21 Feb 2017</span>
     | 
    
    <a href="/blog/tags/#knowledge" class="post-tag">knowledge</a>
    
    

    <article>
      <p>Dynamic Trunking Protocol is a Cisco proprietary protocol that, when configured, attempts to negotiate trunking between two connected ports. It will try to negotiate trunking as well as the encapsulation type.</p>

<p><code class="highlighter-rouge">SW1# switchport mode dynamic auto</code></p>

<ul>
  <li>allows the interfaces to become a trunk if the neighboring trunk is set to trunk or desirable mode</li>
  <li>this is the default setting for newer Cisco switches</li>
  <li>if both ends of a trunk are set to dynamic auto, they will not form a trunk</li>
</ul>

<p><code class="highlighter-rouge">SW1# switchport mode dynamic desireable</code></p>
<ul>
  <li>makes the interface actively attempt to negotiate trunking</li>
  <li>the link will become a trunk if the neighbor interface is set to trunk, auto, or desirable</li>
</ul>

<p><code class="highlighter-rouge">SW1# switchport nonegotiate</code></p>
<ul>
  <li>prevents the interface from sending DTP frames</li>
  <li>can use this when the interface switch port mode is <em>access</em> or <em>trunk</em> only</li>
  <li>if enabled, to establish a trunk the neighbor interface must be manually set to <em>trunk</em></li>
</ul>

    <article>
    <div class="post-more">
      
      <a href="/vlan/2017/02/21/DTP/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/vlan/2017/02/21/DTP/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page18">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/page16">Newer</a>
    
  
</div>


      </div>
    </div>
      
    





      
      

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-00000000-1', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//your_short_name.disqus.com/count.js" async></script>
  
</html>
